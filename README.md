# pg-cache

## 项目定位

pg-cache 致力于为 PostgreSQL 提供高性能、强一致性的超级缓存服务，支持表-字段级精细缓存、结构化查询、批量同步与一致性保障，极大提升数据访问效率，降低数据库压力。

## Benchmark 性能测试

### 本地内存缓存性能

- set 100,000 次总耗时约 0.063 秒，平均每次 ≈ 0.00063 ms
- get 100,000 次总耗时约 0.038 秒，平均每次 ≈ 0.00038 ms
- QPS（每秒请求数）：约 1,500,000~2,600,000

### 与业界主流缓存方案对比

| 方案         | QPS（单机/本地）         | 说明                       |
|--------------|--------------------------|----------------------------|
| pg-cache（本地内存） | 1,500,000~2,600,000         | Python dict 级别，极致性能 |
| Redis        | 100,000~1,000,000        | 受限于网络/协议            |
| Memcached    | 100,000~1,000,000        | 受限于网络/协议            |
| Guava/Caffeine(Java) | 1,000,000+           | 本地缓存库                 |

> 结论：pg-cache 作为本地内存缓存，性能已达业界顶级水准，适合单机/单进程高性能场景。

## 目录结构

```
pg-cache/
  src/        # 主代码目录
  tests/      # 测试代码目录
  config/     # 配置文件目录
  docs/       # 需求与任务文档
  benchmarks/ # 性能测试脚本
  requirements.txt  # 依赖管理
  README.md   # 项目说明
```

## 快速开始

1. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
2. 配置数据库连接与缓存策略（见 config/ 目录）
3. 运行主程序（开发中）

## 主要特性
- 表-字段级缓存配置
- 强一致性保障
- 支持结构化查询
- 支持批量同步/初始化
- 丰富的监控与可观测性

## 项目优点
- 极致性能：本地内存缓存，QPS 达到业界顶级水准，适合高并发场景
- 精细化缓存：支持表-字段级别的灵活缓存策略，满足多样化业务需求
- 一致性保障：内置强一致性机制，确保缓存与数据库数据同步
- 易用性强：配置简单，易于集成到现有 PostgreSQL 应用体系
- 可扩展性好：模块化设计，便于功能扩展和二次开发
- 监控完善：丰富的监控与可观测性，便于运维和问题定位

## 贡献与开发
- 代码遵循单一职责、低耦合、可测试、可扩展原则
- 欢迎 issue 和 PR 

## 开源协议
本项目采用最宽泛的 MIT License 开源协议，允许自由使用、修改和分发，欢迎社区共同参与和贡献。 